{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport function render(data) {\n  const container = document.querySelector('.gallery');\n\n  function imageTemplate(image) {\n    const webformatURL = image.webformatURL;\n    const largeImageURL = image.largeImageURL;\n    const tags = image.tags;\n    const likes = image.likes;\n    const views = image.views;\n    const comments = image.comments;\n    const downloads = image.downloads;\n\n    return `<div class=\"card\">\n            <a href='${largeImageURL}' class=\"large-image-link\">\n              <img class=\"image\" src='${webformatURL}' alt=\"${tags}\">\n              <div class=\"info\">\n                <p class=\"info-item\"><span class=\"info-header\">Likes</span><br>${likes}</p>\n                <p class=\"info-item\"><span class=\"info-header\">Views</span><br>${views}</p>\n                <p class=\"info-item\"><span class=\"info-header\">Comments</span><br>${comments}</p>\n                <p class=\"info-item\"><span class=\"info-header\">Downloads</span><br>${downloads}</p>\n              </div>\n            </a>\n          </div>`;\n  }\n\n  let markup = '';\n  data.forEach(image => {\n    markup += imageTemplate(image);\n  });\n\n  container.insertAdjacentHTML('beforeend', markup);\n\n  const gallery = new SimpleLightbox('.large-image-link');\n  gallery.refresh();\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport axios from 'axios';\nimport { render } from './render-functions';\n\nconst searchInput = document.querySelector('.searchInput');\nconst loader = document.querySelector('.loader');\nconst container = document.querySelector('.gallery');\nconst loadMoreBtn = document.querySelector('.loadMoreBtn');\n\nlet page = 1;\nlet totalHits = 0;\n\nconst KEY = '42324270-89622daef349524aeb531ebd1';\nconst BASE_URL = 'https://pixabay.com/api/';\nconst otherParams =\n  'image_type=photo&orientation=horizontal&safesearch=true&per_page=15';\n\nexport async function getImages() {\n  page = 1;\n\n  const query = searchInput.value.trim();\n  const LINK = `${BASE_URL}?key=${KEY}&q=${query}&${otherParams}`;\n\n  loader.classList.remove('hidden');\n  container.innerHTML = '';\n\n  try {\n    const response = await axios.get(LINK);\n    const data = response.data;\n\n    if (data.hits.length === 0) {\n      loadMoreBtn.classList.add('hidden');\n      iziToast.show({\n        position: 'topRight',\n        timeout: 3500,\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        close: false,\n        messageColor: 'white',\n        backgroundColor: 'green',\n      });\n    } else {\n      render(data.hits);\n      if (data.hits.length >= 15) {\n        loadMoreBtn.classList.remove('hidden');\n      } else {\n        loadMoreBtn.classList.add('hidden');\n      }\n    }\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Error while rendering images',\n      position: 'topRight',\n      timeout: 2500,\n    });\n  } finally {\n    loader.classList.add('hidden');\n  }\n}\n\nexport async function loadMoreImages() {\n  page += 1;\n\n  const query = searchInput.value.trim();\n  const LINK = `${BASE_URL}?key=${KEY}&q=${query}&${otherParams}&page=${page}`;\n\n  let data;\n\n  try {\n    const response = await axios.get(LINK);\n    data = response.data;\n    totalHits = data.totalHits;\n\n    render(data.hits);\n\n    smoothScrollToGallery();\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Error while rendering images',\n      position: 'topRight',\n      timeout: 2500,\n    });\n  } finally {\n    if (data && page * 15 >= data.totalHits) {\n      loadMoreBtn.classList.add('hidden');\n\n      iziToast.show({\n        position: 'topRight',\n        timeout: 3500,\n        message: \"We're sorry, but you've reached the end of search results.\",\n        close: false,\n        messageColor: 'white',\n        backgroundColor: 'green',\n      });\n    } else {\n      loadMoreBtn.classList.remove('hidden');\n    }\n  }\n}\n\nfunction smoothScrollToGallery() {\n  const cardHeight = container.firstElementChild.getBoundingClientRect().height;\n\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { getImages, loadMoreImages } from './js/pixabay-api';\n\nconst submitForm = document.querySelector('.submitForm');\nconst searchInput = document.querySelector('.searchInput');\nconst loadMoreBtn = document.querySelector('.loadMoreBtn');\n\nsubmitForm.addEventListener('submit', event => {\n  event.preventDefault();\n\n  const query = searchInput.value.trim();\n\n  if (query === '') {\n    iziToast.show({\n      position: 'topRight',\n      timeout: 2000,\n      message: 'Please, enter the word!',\n      close: false,\n      messageColor: 'white',\n      backgroundColor: 'grey',\n    });\n    return;\n  }\n\n  getImages();\n});\n\nloadMoreBtn.addEventListener('click', () => {\n  loadMoreBtn.classList.remove('hidden');\n  loadMoreImages();\n});\n"],"names":["render","data","container","imageTemplate","image","webformatURL","largeImageURL","tags","likes","views","comments","downloads","markup","SimpleLightbox","searchInput","loader","loadMoreBtn","page","totalHits","KEY","BASE_URL","otherParams","getImages","query","LINK","axios","iziToast","loadMoreImages","smoothScrollToGallery","cardHeight","submitForm","event"],"mappings":"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"}