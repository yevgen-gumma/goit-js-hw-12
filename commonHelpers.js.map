{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import 'izitoast/dist/css/iziToast.min.css';\nimport axios from 'axios';\n\nconst KEY = '42324270-89622daef349524aeb531ebd1';\nconst BASE_URL = 'https://pixabay.com/api/';\nconst otherParams =\n  'image_type=photo&orientation=horizontal&safesearch=true&per_page=15';\n\nexport async function fetchImages(query, page, iziToast) {\n  const LINK = `${BASE_URL}?key=${KEY}&q=${query}&${otherParams}&page=${page}`;\n\n  try {\n    const response = await axios.get(LINK);\n    return response.data;\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Error while fetching images',\n      position: 'topRight',\n      timeout: 2500,\n    });\n  }\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport function render(data) {\n  const container = document.querySelector('.gallery');\n\n  function imageTemplate(image) {\n    const webformatURL = image.webformatURL;\n    const largeImageURL = image.largeImageURL;\n    const tags = image.tags;\n    const likes = image.likes;\n    const views = image.views;\n    const comments = image.comments;\n    const downloads = image.downloads;\n\n    return `<div class=\"card\">\n            <a href='${largeImageURL}' class=\"large-image-link\">\n              <img class=\"image\" src='${webformatURL}' alt=\"${tags}\">\n              <div class=\"info\">\n                <p class=\"info-item\"><span class=\"info-header\">Likes</span><br>${likes}</p>\n                <p class=\"info-item\"><span class=\"info-header\">Views</span><br>${views}</p>\n                <p class=\"info-item\"><span class=\"info-header\">Comments</span><br>${comments}</p>\n                <p class=\"info-item\"><span class=\"info-header\">Downloads</span><br>${downloads}</p>\n              </div>\n            </a>\n          </div>`;\n  }\n\n  let markup = '';\n  data.forEach(image => {\n    markup += imageTemplate(image);\n  });\n\n  container.insertAdjacentHTML('beforeend', markup);\n\n  const gallery = new SimpleLightbox('.large-image-link');\n  gallery.refresh();\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { fetchImages } from './js/pixabay-api';\nimport { render } from './js/render-functions';\n\nconst submitForm = document.querySelector('.submitForm');\nconst searchInput = document.querySelector('.searchInput');\nconst loadMoreBtn = document.querySelector('.loadMoreBtn');\nconst loader = document.querySelector('.loader');\nconst container = document.querySelector('.gallery');\n\nlet page = 1;\n\nsubmitForm.addEventListener('submit', async event => {\n  event.preventDefault();\n\n  const query = searchInput.value.trim();\n\n  if (query === '') {\n    iziToast.show({\n      position: 'topRight',\n      timeout: 2000,\n      message: 'Please, enter the word!',\n      close: false,\n      messageColor: 'white',\n      backgroundColor: 'grey',\n    });\n    return;\n  }\n\n  try {\n    loader.classList.remove('hidden');\n    container.innerHTML = '';\n    page = 1;\n\n    const data = await fetchImages(query, page, iziToast);\n\n    if (data.hits.length === 0) {\n      loadMoreBtn.classList.add('hidden');\n      iziToast.show({\n        position: 'topRight',\n        timeout: 3500,\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        close: false,\n        messageColor: 'white',\n        backgroundColor: 'green',\n      });\n    } else {\n      render(data.hits);\n      if (data.hits.length >= 15) {\n        loadMoreBtn.classList.remove('hidden');\n      } else {\n        loadMoreBtn.classList.add('hidden');\n      }\n    }\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Error while rendering images',\n      position: 'topRight',\n      timeout: 2500,\n    });\n  } finally {\n    loader.classList.add('hidden');\n  }\n});\n\nloadMoreBtn.addEventListener('click', async () => {\n  loadMoreBtn.classList.remove('hidden');\n\n  let data;\n  let totalHits;\n\n  page += 1;\n\n  const query = searchInput.value.trim();\n\n  try {\n    data = await fetchImages(query, page, iziToast);\n\n    totalHits = data.totalHits;\n\n    render(data.hits);\n\n    smoothScrollToGallery();\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: 'Error while rendering images',\n      position: 'topRight',\n      timeout: 2500,\n    });\n  } finally {\n    if (data && page * 15 >= data.totalHits) {\n      loadMoreBtn.classList.add('hidden');\n\n      iziToast.show({\n        position: 'topRight',\n        timeout: 3500,\n        message: \"We're sorry, but you've reached the end of search results.\",\n        close: false,\n        messageColor: 'white',\n        backgroundColor: 'green',\n      });\n    } else {\n      loadMoreBtn.classList.remove('hidden');\n    }\n  }\n});\n\nfunction smoothScrollToGallery() {\n  const cardHeight = container.firstElementChild.getBoundingClientRect().height;\n\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n"],"names":["KEY","BASE_URL","otherParams","fetchImages","query","page","iziToast","LINK","axios","render","data","container","imageTemplate","image","webformatURL","largeImageURL","tags","likes","views","comments","downloads","markup","SimpleLightbox","submitForm","searchInput","loadMoreBtn","loader","event","totalHits","smoothScrollToGallery","cardHeight"],"mappings":"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"}